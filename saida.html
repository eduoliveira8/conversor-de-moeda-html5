<!doctype html>
<html>
   <head>
      <meta charset="utf-8">
      <title>Conversor de Moeda - Saída</title>
      <script>
      	function voltar(){
      		//voltar para a pagina da entrada
      		location.href = "entrada.html";
      	}
      	
		function carregaResposta(){
			
			var oUrl = new URL(location.href);
			var sValorOrigem = oUrl.searchParams.get("valor_origem");
			console.log(sValorOrigem);
			
		}
		
		function callback(){
				console.log("Caiu aqui");
				var oResponse = this;
				var sResponseBody = oResponse.responseText;
				var oJSON = JSON.parse(sResponseBody);
				var sReais = oJSON.rates.BRL;
				
				console.log(sReais);
				
				document.querySelector("#valor_de_destino").value = sReais;
		}
			
		function chamaAPI(){
				const sURL = "https://api.exchangeratesapi.io/latest";
				var oRequest = new XMLHttpRequest();
				oRequest.addEventListener("load", callback);
				oRequest.open("GET", sURL);
				oRequest.send();
				console.log("Já passou pelo o send");
		}
		
		window.onload = function(){
			chamaAPI();
		}

		
      </script>
   </head>
   <body>
      <label>Moeda de Destino</label>
      <input type="text" value= "BRL" disabled="true">
      <br />
      <label>Valor de Destino</label>
      <input type="number" disabled="true" id="valor_de_destino">
      <br />
      <button type="button" onclick="voltar()">Voltar</button>
   </body>
</html>